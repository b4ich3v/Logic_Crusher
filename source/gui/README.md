### **Основни Компоненти**

1. **GUI (Graphical User Interface):** Използва Tkinter за създаване на прозорци, бутони, полета за въвеждане и други елементи на потребителския интерфейс.
2. **Boolean Logic Operations:** Използва модули като `boolean_functions`, `gate_parser`, `validator`, и `karnaugh` за обработка на логически изрази.
3. **Visualization:** Използва Graphviz за визуализация на AST и логически схеми, а Matplotlib за Вен диаграми.
4. **File Operations:** Позволява запазване на обработените логически функции във файлове във формат JSON.
5. **Set Operations:** Предоставя функционалности за работа с множества, включително операции като обединение, пресичане, разлика и други.

---

### **Основни Функции за Логически Изрази**

1. **`simplify_expression()`**
    - **Цел:** Опростява избрания логически израз.
    - **Процес:**
        - Взема избрания израз чрез `get_selected_expression()`.
        - Валидира синтаксиса му с помощта на `Validator.validate()`.
        - Създава обект `BooleanFunction` и го добавя към `function_set`.
        - Опростява израза чрез метода `simplify()` и показва резултата в `result_label`.

2. **`zhegalkin_polynomial()`**
    - **Цел:** Генерира полинома на Жегалкин за избрания логически израз.
    - **Процес:**
        - Взема и валидира израза.
        - Създава обект `BooleanFunction` и го добавя към `function_set`.
        - Генерира полинома на Жегалкин чрез `to_zhegalkin()` и го показва в `result_label`.

3. **`check_properties()`**
    - **Цел:** Проверява различни свойства на избрания логически израз, като запазване на нула и единица, самодуелност, монотонност и линейност.
    - **Процес:**
        - Взема и валидира израза.
        - Създава обект `BooleanFunction` и го добавя към `function_set`.
        - Проверява свойствата чрез съответните методи (`preserves_zero()`, `preserves_one()`, `is_self_dual()`, `is_monotonic()`, `is_linear()`) и показва резултатите в `result_label`.

4. **`minimize_expression()`**
    - **Цел:** Минимизира избрания логически израз.
    - **Процес:**
        - Взема и валидира израза.
        - Създава обект `BooleanFunction` и го добавя към `function_set`.
        - Минимизира израза чрез `minimize()` и показва резултата в `result_label`.

5. **`decompose_expression()`**
    - **Цел:** Декомпозира избрания логически израз по дадена променлива, изчислявайки кофактори при променливата `0` и `1`.
    - **Процес:**
        - Взема израза и променливата за декомпозиция чрез `get_selected_expression()` и `variable_entry.get()`.
        - Валидира израза.
        - Създава обект `BooleanFunction` и го добавя към `function_set`.
        - Декомпозира израза чрез `decompose(variable)` и показва резултатите в `result_label`.

6. **`generate_kmap()`**
    - **Цел:** Генерира Карно карта за избрания логически израз.
    - **Процес:**
        - Взема и валидира израза.
        - Създава обект `BooleanFunction` и го добавя към `function_set`.
        - Проверява броя на променливите; ако е между 2 и 4, генерира Карно карта чрез `KarnaughMap` и я визуализира с `plot_map()`.

7. **`save_to_file()`**
    - **Цел:** Запазва информацията за логическите функции в JSON файл.
    - **Процес:**
        - Взема информацията от `function_set.get_functions_info()`.
        - Отваря диалог за избор на файл чрез `filedialog.asksaveasfilename()`.
        - Запазва данните във избрания файл с помощта на `json.dump()` и показва съобщение за успех или грешка.

8. **`visualize_ast()`**
    - **Цел:** Визуализира абстрактното синтактично дърво (AST) на избрания логически израз.
    - **Процес:**
        - Взема и валидира израза.
        - Създава обект `BooleanFunction` и го добавя към `function_set`.
        - Взема AST чрез `bf.ast`.
        - Създава Graphviz графа, преобразува AST в Graphviz формат чрез `to_graphviz()`, рендерира и показва изображението.

9. **`check_equivalence()`**
    - **Цел:** Проверява дали два логически израза са еквивалентни.
    - **Процес:**
        - Взема двата израза от `expr_entry` и `expr_entry2`.
        - Валидира синтаксиса на двата израза.
        - Създава обекти `BooleanFunction` за двата израза и ги добавя към `function_set`.
        - Генерира полиномите на Жегалкин чрез `to_zhegalkin()` и ги сравнява.
        - Ако полиномите са равни, показва съобщение за еквивалентност. Ако не са, изчислява разликата в броя на входните комбинации чрез `difference_measure()` и показва резултата.

10. **`difference_measure(f1, f2)`**
    - **Цел:** Изчислява разликата между две логически функции като броя на входните комбинации, при които те се различават.
    - **Процес:**
        - Обединява всички променливи от двете функции.
        - Изчислява стойностите на двете функции за всяка комбинация на променливите.
        - Брои разликите и връща броя на различните комбинации.

11. **`generate_circuit()`**
    - **Цел:** Генерира логическа схема (`circuit diagram`) за избрания логически израз.
    - **Процес:**
        - Взема и валидира израза.
        - Създава обект `BooleanFunction` и го добавя към `function_set`.
        - Минимизира израза чрез `minimize()`.
        - Парсира минимизирания израз в AST на гейтове чрез `parse_minimized_expression()`.
        - Визуализира логическата схема с Graphviz чрез `gate_ast_to_graphviz()` и показва изображението.

---

### **Помощни Функции**

1. **`get_selected_expression()`**
    - **Цел:** Връща избрания логически израз (първи или втори).
    - **Процес:**
        - Проверява стойността на `selected_expr`.
        - Връща съдържанието на съответното поле за въвеждане (`expr_entry` или `expr_entry2`).

2. **`open_help_website()`**
    - **Цел:** Отваря уебсайт с помощни инструкции (GitHub).
    - **Процес:**
        - Използва модула `webbrowser` за отваряне на даден URL адрес (`help_url`).

---

### **Функции за Работа с Множества**

1. **`open_sets_window()`**
    - **Цел:** Отваря нов прозорец за извършване на операции със множества.
    - **Процес:**
        - Създава ново Tkinter окно с размери 900x600 и заглавие "Set operations".
        - Опитва се да зареди фоново изображение; ако не успее, използва светло сиво като фон.
        - Създава елементи за въвеждане на два множества (Set A и Set B).
        - Добавя бутони за различни операции:
            - **Обединение (Union)**
            - **Пресичане (Intersection)**
            - **Разлика (Difference)**
            - **Симетрична разлика (Symmetric difference)**
            - **Вен диаграма (Venn diagram)**
            - **Дискретност (Disjoint check)**
            - **Декартово произведение (Cartesian product)**
            - **Кардиналност (Cardinality)**
            - **Мощни множества (Power Set)**
            - **Отношения между A и B (Relations)**
        - Определя вътрешни функции за всяка операция, които обработват въведените множества и показват резултатите в `result_label_sets`.

    2. **Вътрешни Функции в `open_sets_window()`**
        - **`sets_to_bitmasks(s1, s2)`**
            - **Описание:** Преобразува две множества в битови маски за по-лесни битови операции.
            - **Процес:** Създава карта на елементите към индекси и генерира битови маски за всяко множество.

        - **`bitmask_to_set(bitmask, all_els)`**
            - **Описание:** Преобразува битова маска обратно в множество.
            - **Процес:** Преглежда всеки бит и добавя съответния елемент към резултата, ако битът е настроен.

        - **`parse_set(entry)`**
            - **Описание:** Парсира въведения текст и го преобразува в множество.
            - **Процес:** Разделя въведения текст по запетайки и премахва излишните интервали.

        - **`perform_set_operation(entry1, entry2, operation)`**
            - **Описание:** Извършва избраната операция (обединение, пресичане и т.н.) върху двете множества и показва резултатите.
            - **Процес:** Използва битовите маски за извършване на операцията и преобразува резултата обратно в множество.

        - **`check_all_relations()`**
            - **Описание:** Проверява различни отношения между двете множества, като подмножество, супермножество, равенство и други.
            - **Процес:** Използва битовите маски за проверка на отношенията и показва резултатите.

        - **`perform_set_relation(entry1, entry2, relation)`**
            - **Описание:** Извършва конкретна проверка за отношение между двете множества (например дискретност).
            - **Процес:** Проверява дали множествата са дискретни (нямат общи елементи) и показва резултата.

        - **`power_set_both()`**
            - **Описание:** Генерира и показва мощните множества (power sets) на двете въведени множества.
            - **Процес:** Изчислява всички подмножества чрез битови маски и ги показва като текст.

        - **`plot_venn()`**
            - **Описание:** Генерира Вен диаграма за двете множества с помощта на Matplotlib.
            - **Процес:** Използва `venn2` и `venn2_circles` от `matplotlib_venn` за визуализация на Вен диаграмата.

        - **`cartesian_product(entry1, entry2)`**
            - **Описание:** Изчислява и показва декартовото произведение на двете множества.
            - **Процес:** Генерира всички възможни наредени двойки и ги показва като текст.

        - **`cardinality(entry1, entry2)`**
            - **Описание:** Изчислява и показва кардиналността (брой елементи) на двете множества.
            - **Процес:** Брои елементите в двете множества и показва резултатите.

---

### **Основна Функция за Стартиране**

1. **`run()`**
    - **Цел:** Инициализира и стартира главния прозорец на приложението.
    - **Процес:**
        - Създава главен Tkinter прозорец с заглавие "Logic crusher" и размери 1000x600 пиксела.
        - Настройва стила на прозореца, като премахва стандартния заглавен бар в Windows.
        - Създава Canvas за рисуване на фоновото изображение и други елементи.
        - Опитва се да зареди и анимира фоново изображение (`main_background.gif`), като използва `ImageSequence.Iterator` за анимацията.
        - Създава елементи за въвеждане на два логически израза (`expr_entry`, `expr_entry2`) и радио бутони за избор на активен израз.
        - Добавя поле за въвеждане на променлива за декомпозиция (`variable_entry`).
        - Създава `result_frame` с `result_label` за показване на резултатите от операциите.
        - Създава бутони за основните функции:
            - **Simplification**
            - **Zhegalkin polynomial**
            - **Property Check**
            - **Minimize**
            - **Factoring in a variable**
            - **Generate a Karnaugh map**
            - **Visualization of AST**
            - **Generate Circuit**
            - **Equivalence check**
        - Добавя бутони за допълнителни функции:
            - **Save to file**
            - **Help**
            - **Sets**
        - Зарежда фоновите кадри за анимацията и стартира главния цикъл на Tkinter (`root.mainloop()`).

---
